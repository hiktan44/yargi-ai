# ============================================================================
# SUPABASE CONFIGURATION
# ============================================================================

# Supabase Project Settings
# Get these from your Supabase project settings
SUPABASE_URL=http://supabasekong-lwcg4k08sskkw8g84swcc008.65.108.77.26.sslip.io
SUPABASE_ANON_KEY=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTc2NjkyMTQwMCwiZXhwIjo0OTIyNTk1MDAwLCJyb2xlIjoiYW5vbiJ9.ReVoOBusbwZBN2RP6EVekx5vfUXZoRYs0Z0viI5ojsk
SUPABASE_SERVICE_KEY=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJzdXBhYmFzZSIsImlhdCI6MTc2NjkyMTQwMCwiZXhwIjo0OTIyNTk1MDAwLCJyb2xlIjoic2VydmljZV9yb2xlIn0.90i2oyLzArTFLkykuqOuGjR4QMm7IlT5If8GBcfymdk

# Enable Supabase features
ENABLE_SUPABASE=true
ENABLE_SUPABASE_CACHE=true
ENABLE_SUPABASE_ANALYTICS=true
ENABLE_SUPABASE_AUTH=true

# ============================================================================
# VECTOR STORE SETTINGS
# ============================================================================

# Vector dimension (default: 768 for OpenAI embeddings)
VECTOR_DIMENSION=768

# Similarity threshold for vector search (0.0 - 1.0)
VECTOR_SIMILARITY_THRESHOLD=0.7

# Maximum results for vector search
VECTOR_MAX_RESULTS=10

# Document TTL in days (auto-delete after)
DOCUMENT_TTL_DAYS=30

# ============================================================================
# CACHE SETTINGS
# ============================================================================

# Default cache TTL in seconds
CACHE_DEFAULT_TTL=3600

# Cache compression threshold (characters)
CACHE_COMPRESSION_THRESHOLD=5000

# Enable automatic cache cleanup
CACHE_AUTO_CLEANUP=true

# Cache cleanup interval (seconds)
CACHE_CLEANUP_INTERVAL=3600

# ============================================================================
# ANALYTICS SETTINGS
# ============================================================================

# Analytics batch size (events to batch before writing)
ANALYTICS_BATCH_SIZE=100

# Analytics flush interval (seconds)
ANALYTICS_FLUSH_INTERVAL=60

# Enable detailed analytics
ENABLE_DETAILED_ANALYTICS=true

# Retention period for analytics data (days)
ANALYTICS_RETENTION_DAYS=90

# ============================================================================
# OAUTH SETTINGS (if using Supabase Auth)
# ============================================================================

# OAuth session TTL (seconds)
OAUTH_SESSION_TTL=3600

# OAuth token TTL (seconds)
OAUTH_TOKEN_TTL=86400

# Enable automatic cleanup of expired sessions
OAUTH_AUTO_CLEANUP=true

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Connection pool size for Supabase client
SUPABASE_POOL_SIZE=10

# Query timeout (seconds)
SUPABASE_QUERY_TIMEOUT=30

# Enable connection pooling
SUPABASE_ENABLE_POOLING=true

# ============================================================================
# MONITORING
# =============================================================================

# Enable health checks with Supabase
ENABLE_HEALTH_CHECK=true

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL=60

# ============================================================================
# USAGE NOTES
# ============================================================================

# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Get your Supabase credentials:
#    - Go to https://supabase.com/dashboard
#    - Select your project
#    - Go to Settings > API
#    - Copy URL and service_role key
#
# 3. Run the migration script in Supabase SQL Editor:
#    - Open SQL Editor in Supabase dashboard
#    - Copy contents of supabase_migration.sql
#    - Run the script
#
# 4. Test the connection:
#    - Set ENABLE_SUPABASE=true
#    - Restart the server
#    - Check logs for "Supabase client initialized"
#
# 5. Monitor performance:
#    - Check Supabase dashboard for query performance
#    - Use get_mcp_stats() function for statistics
#    - Monitor cache hit/miss ratios
